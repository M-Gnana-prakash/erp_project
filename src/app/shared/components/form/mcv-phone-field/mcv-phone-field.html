<div class="flex flex-col w-full gap-1">
  @if (label) {
  <label [class]="{
            'text-xs': computedStyles.sizeVariant === 'sm',
            'text-sm': computedStyles.sizeVariant === 'md',
            'text-base': computedStyles.sizeVariant === 'lg'
        }" class="font-medium text-gray-700 mb-1">
    {{ label }} @if(required){<span class="text-red-500">*</span>}
  </label>
  }

  <div class="flex items-center w-full rounded transition-all duration-200" [style.border]="(isFocused || isSelectFocused)
      ? computedStyles.activeBorderStyle
      : computedStyles.borderStyle" [style.outline]="(isFocused || isSelectFocused)
      ? computedStyles.activeOutline
      : computedStyles.outline" [style.background-color]="(isFocused || isSelectFocused)
      ? computedStyles.activeBackgroundColor
      : computedStyles.backgroundColor">
    <!-- Country code dropdown -->
    @if (showCountryCode) {
    <select [value]="countryCode" (change)="onCountryCodeChange($event)" (focus)="isSelectFocused = true"
      (blur)="isSelectFocused = false" [disabled]="disabled" class="bg-transparent border-none focus:outline-none cursor-pointer border-r
               appearance-none
               bg-[url('data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E')]
               bg-no-repeat bg-position-[right_0.5rem_center]" [ngClass]="{
          'px-2 py-1 pr-6 text-xs': computedStyles.sizeVariant === 'sm',
          'px-3 py-2 pr-8 text-sm': computedStyles.sizeVariant === 'md',
          'px-4 py-3 pr-10 text-base': computedStyles.sizeVariant === 'lg',
          'opacity-50 cursor-not-allowed': disabled
        }" [style.border-right]="(isFocused || isSelectFocused)
          ? computedStyles.activeBorderStyle
          : computedStyles.borderStyle" [style.color]="(isFocused || isSelectFocused)
          ? computedStyles.activeTextColor
          : computedStyles.textColor">
      @for (item of countryCodes; track item.code) {
      <option [value]="item.code">{{ item.code }}</option>
      }
    </select>
    }

    <!-- Phone Input -->
    <input [value]="value" [placeholder]="placeholder" [disabled]="disabled" [readOnly]="readonly"
      (input)="onInputChange($event)" (focus)="isFocused = true" (blur)="onBlur()"
      class="w-full bg-transparent border-none focus:outline-none" [ngClass]="{
        'px-2 py-1 text-xs': computedStyles.sizeVariant === 'sm',
        'px-3 py-2 text-sm': computedStyles.sizeVariant === 'md',
        'px-4 py-3 text-base': computedStyles.sizeVariant === 'lg',
        'opacity-50 cursor-not-allowed': disabled
      }" [style.color]="(isFocused || isSelectFocused)
        ? computedStyles.activeTextColor
        : computedStyles.textColor" />
  </div>

  <!-- Validation -->
  @if (needValidationStatusMessage && errors.length > 0 && isTouched) {
  <div class="mt-1">
    @for (error of errors; track error) {
    <p class="text-red-500 text-xs mt-0.5">
      {{ error }}
    </p>
    }
  </div>
  }
</div>