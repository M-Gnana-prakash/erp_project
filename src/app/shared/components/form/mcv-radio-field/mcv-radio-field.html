<div class="flex flex-col w-full gap-2">
  @if (label) {
  <label class="text-sm font-medium text-gray-700 select-none block mb-1">{{ label }}</label>
  }

  <div [ngClass]="{
      'flex flex-col gap-2': layout === 'vertical',
      'flex flex-row flex-wrap gap-4': layout === 'horizontal'
    }">

    @for (option of options; track option.value) {
    <label class="relative flex items-center cursor-pointer group select-none transition-all duration-200"
      [class.opacity-50]="disabled || option.disabled" [class.cursor-not-allowed]="disabled || option.disabled">

      <input type="radio" [name]="name" [value]="option.value" [checked]="value === option.value"
        [disabled]="disabled || option.disabled" (change)="onOptionChange(option.value)" class="sr-only peer">

      <!-- Custom Radio Circle -->
      <div
        class="rounded-full border transition-all duration-200 flex items-center justify-center
                    peer-focus:ring-2 peer-focus:ring-blue-500 peer-focus:ring-offset-1
                    peer-checked:border-blue-600 peer-checked:bg-blue-600 border-gray-300 bg-white group-hover:border-blue-400"
        [ngClass]="{
               'w-4 h-4': sizeVariant === 'sm',
               'w-5 h-5': sizeVariant === 'md',
               'w-6 h-6': sizeVariant === 'lg'
             }">
        <!-- Inner dot -->
        <div class="rounded-full bg-white transform scale-0 transition-transform duration-200"
          [class.scale-100]="value === option.value" [ngClass]="{
                  'w-1.5 h-1.5': sizeVariant === 'sm',
                  'w-2 h-2': sizeVariant === 'md',
                  'w-2.5 h-2.5': sizeVariant === 'lg'
                }"></div>
      </div>

      <span class="ml-2 text-gray-700 font-medium group-hover:text-gray-900 transition-colors duration-200" [ngClass]="{
                'text-sm': sizeVariant === 'sm', 
                'text-base': sizeVariant === 'md', 
                'text-lg': sizeVariant === 'lg'
              }">
        {{ option.label }}
      </span>
    </label>
    }
  </div>

  @if (needValidationStatusMessage && errors.length > 0) {
  <div class="mt-1">
    @for (error of errors; track error) {
    <p class="text-red-500 text-xs mt-0.5">{{ error }}</p>
    }
  </div>
  }
</div>