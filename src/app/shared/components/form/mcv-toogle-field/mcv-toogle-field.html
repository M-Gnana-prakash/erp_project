<div class="flex flex-col gap-1">
  <div class="flex items-center gap-2 cursor-pointer" (click)="toggle()" [class.cursor-not-allowed]="disabled"
    [class.opacity-50]="disabled">

    <!-- Toggle Switch Visual -->
    <div class="relative transition-all duration-200 rounded-full" [ngClass]="{
                'w-8 h-4': computedStyles.sizeVariant === 'sm',
                'w-10 h-5': computedStyles.sizeVariant === 'md',
                'w-12 h-6': computedStyles.sizeVariant === 'lg'
             }" [style.background-color]="value ? computedStyles.activeTrackColor : computedStyles.trackColor">

      <!-- Knob -->
      <div class="absolute top-0 bottom-0 m-auto rounded-full transition-all duration-200 shadow-sm" [ngClass]="{
                    'w-3 h-3 left-0.5': computedStyles.sizeVariant === 'sm' && !value,
                    'w-3 h-3 left-[calc(100%-0.875rem)]': computedStyles.sizeVariant === 'sm' && value,
                    
                    'w-4 h-4 left-0.5': computedStyles.sizeVariant === 'md' && !value,
                    'w-4 h-4 left-[calc(100%-1.125rem)]': computedStyles.sizeVariant === 'md' && value,

                    'w-5 h-5 left-0.5': computedStyles.sizeVariant === 'lg' && !value,
                    'w-5 h-5 left-[calc(100%-1.375rem)]': computedStyles.sizeVariant === 'lg' && value
                 }" [style.background-color]="value ? computedStyles.activeKnobColor : computedStyles.knobColor"></div>
    </div>

    <!-- Hidden Input -->
    <input type="checkbox" [checked]="value" [disabled]="disabled" [required]="required"
      (change)="onInputChange($event)" (focus)="isFocused = true" (blur)="isFocused = false" class="sr-only" />

    <!-- Label -->
    @if (label) {
    <span [style.color]="computedStyles.labelColor" [ngClass]="{
                    'text-xs': computedStyles.sizeVariant === 'sm',
                    'text-sm': computedStyles.sizeVariant === 'md',
                    'text-base': computedStyles.sizeVariant === 'lg'
                  }">
      {{ label }}
    </span>
    }
  </div>

  <!-- Validation -->
  @if (needValidationStatusMessage && errors.length > 0) {
  <div class="mt-1">
    @for (error of errors; track error) {
    <p class="text-red-500 text-xs mt-0.5">
      {{ error }}
    </p>
    }
  </div>
  }
</div>